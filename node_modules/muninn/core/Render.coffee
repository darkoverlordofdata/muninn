#+--------------------------------------------------------------------+
#  Render.coffee
#+--------------------------------------------------------------------+
#  Copyright DarkOverlordOfData (c) 2012 - 2013
#+--------------------------------------------------------------------+
#
#  This file is a part of Exspresso
#
#  Exspresso is free software you can copy, modify, and distribute
#  it under the terms of the MIT License
#
#+--------------------------------------------------------------------+
#
# Exspresso Render Class
#
# Renders the view based on the view file extension
#
#
fs        = require('fs')
path      = require('path')
muninn    = require('../muninn')          # muninn core

class muninn.core.Render

  ect             = require('ect')                # Embedded CoffeeScript templates
  marked          = require('marked')             # A markdown parser

  constructor: ->

    muninn.logMessage 'debug', 'Render Initialized'

  #
  # Enbedded coffee-script
  #
  # @param  [String]  tmp the template
  # @param  [Object]  data  hash of variable to merge into template
  # @return [String] the rendered markup
  #
  ect: ($tmp, $data) ->
    $render = ect(root: path.dirname($tmp))
    $render.render(path.basename($tmp), $data)

  #
  # HTML
  #
  # @param  [String]  tmp the template
  # @param  [Object]  data  hash of variable to merge into template
  # @return [String] the rendered markup
  #
  html: ($tmp, $data) ->
    $tmp

  #
  # tpl
  #
  # Expresso template
  #
  # @param  [String]  tmp the template
  # @param  [Object]  data  hash of variable to merge into template
  # @return [String] the rendered markup
  #
  tpl: ($tmp, $data) ->
    $tmp

  #
  # Markdown
  #
  # @param  [String]  tmp the template
  # @param  [Object]  data  hash of variable to merge into template
  # @return [String] the rendered markup
  #
  markdown: ($tmp, $data) ->
    marked($tmp)

  #
  # Markdown
  #
  # @param  [String]  tmp the template
  # @param  [Object]  data  hash of variable to merge into template
  # @return [String] the rendered markup
  #
  md: ($tmp, $data) ->
    marked($tmp)

module.exports = muninn.core.Render
